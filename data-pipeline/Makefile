.PHONY: help install scrape clean explore preprocess train full notebooks test

help:
	@echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
	@echo "â•‘  EcoLabel Data Pipeline - Commandes       â•‘"
	@echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
	@echo ""
	@echo "make install     - Installer dÃ©pendances"
	@echo "make scrape      - Scraping uniquement"
	@echo "make clean       - Nettoyage donnÃ©es"
	@echo "make explore     - Analyse exploratoire"
	@echo "make preprocess  - Preprocessing ML"
	@echo "make train       - EntraÃ®nement modÃ¨le"
	@echo "make full        - Pipeline complet"
	@echo "make notebooks   - Lancer Jupyter Lab"
	@echo "make test        - Lancer tests unitaires"

install:
	@echo "ğŸ“¦ Installation des dÃ©pendances..."
	pip install -r requirements.txt
	python -m spacy download fr_core_news_md
	@echo "âœ… Installation terminÃ©e"

scrape:
	@echo "ğŸ•·ï¸  Scraping en cours..."
	python 1_scrapers/openfoodfacts_scraper.py
	python 1_scrapers/agribalyse_downloader.py
	@echo "âœ… Scraping terminÃ©"

clean:
	@echo "ğŸ§¹ Nettoyage des donnÃ©es..."
	python 2_cleaning/deduplicator.py
	python 2_cleaning/normalizer.py
	python 2_cleaning/schema_validator.py
	python 2_cleaning/missing_handler.py
	@echo "âœ… Nettoyage terminÃ©"

explore:
	@echo "ğŸ“Š Analyse exploratoire..."
	python 3_exploration/statistics.py
	python 3_exploration/visualizations.py
	python 3_exploration/correlations.py
	@echo "âœ… Exploration terminÃ©e"

preprocess:
	@echo "âš™ï¸  Preprocessing ML..."
	python 4_preprocessing/tokenizer.py
	python 4_preprocessing/auto_annotator.py
	python 4_preprocessing/data_augmentation.py
	python 4_preprocessing/train_test_splitter.py
	@echo "âœ… Preprocessing terminÃ©"

train:
	@echo "ğŸ§  EntraÃ®nement du modÃ¨le..."
	python 5_training/train_spacy_ner.py
	python 5_training/evaluate_model.py
	@echo "âœ… EntraÃ®nement terminÃ©"

full:
	@echo "ğŸš€ ExÃ©cution pipeline complet..."
	bash scripts/run_full_pipeline.sh

notebooks:
	@echo "ğŸ““ Lancement Jupyter Lab..."
	jupyter lab 3_exploration/notebooks/

test:
	@echo "ğŸ§ª Lancement des tests..."
	pytest tests/ -v

